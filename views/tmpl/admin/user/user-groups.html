<div class="page page-users">
	<div class="pageheader backpage">		
		<a href back-button><i class="fa fa-arrow-left"></i> Back</a>
	</div>
	
	<div class="pagecontent">
		<div class="row">		
			<div class="dnone card-container col-sm-3 col-md-3">
				<div class="card">
					<div class="bg-dashboard">
						<div class="bg-transparent usersbg">
							<div class="row">
								<div class="col-md-12">
									<h3 class="custom-font">{{page.title}}</h3>
									<p>{{page.subtitle}}</p>									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>			
			<div class="card-container col-sm-4 col-md-3">
				<div class="card">
					<a ui-sref="app.admin.device.devices">
					<div class="noback bg-blue">						
						<div class="row">
							<div class="col-xs-6 ta-r">
								<div class="iconbx">
									<img src="images/device-icon.png" alt="">
								</div>
							</div>
							<div class="col-xs-6">	
								<div class="itxt">							
									<p class="text-elg text-strong mt-5 mb-5">{{dashboardData.primary_device}}</p>
									<span class="text-lg">Devices</span>
								</div>
							</div>
						</div>
					</div>
					</a>
				</div>
			</div>			
			<div class="card-container col-sm-4 col-md-3">
				<div class="card">
					<a ui-sref="app.admin.door.doors">
					<div class="noback bg-slategray lt">						
						<div class="row">
							<div class="col-xs-6 ta-r">
								<div class="iconbx">
									<img src="images/doors-icon.png" alt="">
								</div>
							</div>
							<div class="col-xs-6">	
								<div class="itxt">							
									<p class="text-elg text-strong mt-5 mb-5">{{dashboardData.door}}</p>
									<span class="text-lg">Doors</span>
								</div>
							</div>
						</div>
					</div>
					</a>
				</div>
			</div>			
			<div class="card-container col-sm-4 col-md-3">
				<div class="card">
					<a ui-sref="app.admin.user.users">
					<div class="noback bg-lightred">						
						<div class="row">
							<div class="col-xs-6 ta-r">
								<div class="iconbx">
									<img src="images/users-icon.png" alt="">
								</div>
							</div>
							<div class="col-xs-6">
								<div class="itxt">								
									<p class="text-elg text-strong mt-5 mb-5">{{dashboardData.user}}</p>
									<span class="text-lg">Users</span>
								</div>	
							</div>
						</div>
					</div>
					</a>
				</div>
			</div>			
		</div>
	
		<div class="row" ng-init="getUserGroupList()">
			<div class="col-md-12">	   
				<section class="tile box-shadow">				
					<div class="tile-header dvd dvd-btm">
						<h1 class="custom-font">{{page.title}}</h1>
						<ul class="controls">
							<li class="addpopup">
								<div>
									<script type="text/ng-template" id="myModalContent.html">
										<div name="form1" role="form">
											<div class="modal-header">
												<h4 class="modal-title custom-font">Create User Groups</h4>
											</div>
											<div class="modal-body hometabs usergroups p-0">		
												<md-content class="md-padding tabsdemoDynamicHeight p-0 pt-20">
												<md-tabs md-dynamic-height md-border-bottom>		
													<md-tab label="Group Name">
													<md-content>
														<span class="error">{{user_group_error}}</span>
														<form name="group_form" role="form" ng-validate="validationOptions" ng-submit="saveUserGroup(userGroup, group_form)" id="group_form">
															<div class="p-15">
																<div class="row">
																	<div class="form-group col-sm-12 col-md-12">
																		<label for="">Group Name</label>
																		<input type="text" maxlength="20" name="group_name" id="group_name" ng-model="userGroup.usergroup_name" class="form-control" placeholder="" required>
																	</div>
																	<div class="form-group col-sm-12 col-md-12">
																		<label for="">Facility</label><br/>
																		<select class="form-control" ng-model="userGroup.facility_id" ng-options="item.facility_id as item.facility_name for item in facilityList">
																			<option value="">Select</option>
																		</select>
																	</div>
																</div>
																<div class="modal-footer" style="margin: 20px -15px -15px;">	
																	<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Close</button>
																	<button type="submit" class="btn btn-success btn-rounded btn-ef btn-ef-3 btn-ef-3c"><i class="fa fa-arrow-right"></i> Next</button>	
																</div>
															</div>
														</form>
													</md-content>
													</md-tab>
													
													<md-tab label="Door Schedule">
													<md-content>
														<div class="tile-body p-15">
														<span style="color: green;">{{user_group_success}}</span>
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th>Door/Door Groups</th>
																		<th width="222">Schedule Groups</th>
																	</tr>
																</thead>
																<tbody>
																	<tr ng-repeat="doorlist in listDoorGroup">
																		<td>{{doorlist.door_name}}</td>
																		<td>
																			<span class="loader" id="{{doorlist.ud_id}}" style="display: none;"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span>
																			<!-- <select class="form-control selectpicker" ng-model="{{doorlist.schedulelist.is_access_allowed}}:{{doorlist.is_access_allowed}}" ng-change="addDoorScheduleUserGroup(schedule_id, doorlist.ud_id, this.selected)">
																				<option value="{{item.id}}:{{item.is_access_allowed}}" ng-repeat="item in doorlist.schedulelist" >{{item.name}}</option>
																			</select> -->
																			<select class="form-control" ng-model="doorlist.is_access_allowed" ng-options="item.is_access_allowed as item.name for item in doorlist.schedulelist" ng-change="addDoorScheduleUserGroup(doorlist.schedule_id, doorlist.ud_id,doorlist.is_access_allowed)"  >
																			</select>
																		</td>
																	</tr>
																</tbody>
															</table>
															<div class="modal-footer" style="margin: 20px -15px -15px;">
																<div class="btn btn-success btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Done</div>
															</div>
														</div>
													</md-content>
													</md-tab>
												</md-tabs>
												</md-content>
											</div>
										</div>								
									</script>
									<a ng-click="addGroupOpen()" class="btn btn-default btn-border btn-rounded btn-ef btn-ef-5 btn-ef-5b add"><i class="fa fa-plus"></i> <span>Add User Groups</span></a>
								</div>
							</li>
						</ul>
					</div>
						
					<div class="hometabs">
						<div class="tile-body table-custom">
							<div class="row pos-r mb-40">
								<div class="col-sm-4 col-md-4 filterorder">
									<label class="control-label" ng-init="filtershow=true">
										<a href="javascript:void()"><input type="checkbox" ng-model="filtershow" class="hideshowfilter"/>Filter by</a>
									</label>
									<label class="control-label" uib-dropdown on-toggle="toggled(open)">
										<a href uib-dropdown-toggle style="border-right: 0 none; ">Order by</a>
										<ul class="dropdown-menu with-arrow animated littleFadeInUp">
											<li><a href="" ng-click="orderByMe('title')">Title</a></li>
											<li><a href="" ng-click="orderByMe('facility')">Facility</a></li>
											<li><a href="" ng-click="orderByMe('noofusers')">Users</a></li>
										</ul>
									</label>
								</div>
								<div class="col-sm-8 col-md-8">
									<div class="row">
										<div class="col-sm-6 col-md-6 search first">
											<input type="text" class="form-control" placeholder="Search by text...." ng-keyup="searchFunction($event)" ng-model="searchText">
											<button class="btn btn-default br-2-r" type="button" ng-click="searchFunction()">Search</button>
										</div>
										<div class="col-sm-6 col-md-6 profilephoto csvupload ta-r">
											<div ng-controller="ModalDemo2Ctrl">
												<script type="text/ng-template" id="myModalContent2.html">
													<form name="form1" role="form">
														<div class="modal-header"><h4 class="modal-title custom-font">Upload CSV File</h4></div>
														<div class="modal-body mt-5 pb-30 mb-40">
															<label for="">Upload CSV file</label>
															<div class="profilephoto">
																<input type="file" class="filestyle user-profilep" ui-options="{ buttonText: 'Find file', iconName: 'fa fa-inbox' }" id="profilep-2" tabindex="-1">
																<div class="bootstrap-filestyle input-group"><input type="text" class="form-control " disabled=""> <span class="group-span-filestyle input-group-btn" tabindex="0"><label for="profilep-2" class="btn btn-default "><span class="glyphicon fa fa-inbox"></span> Find file</label></span></div>
															</div>											
														</div>
														<div class="modal-footer">
															<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Cancel</button>
															<button type="submit" class="btn btn-success btn-rounded btn-ef btn-ef-3 btn-ef-3c"><i class="fa fa-arrow-right"></i> Save</button>	
														</div>
													</form>		
												</script>
												<span ng-click="open()" class="group-span-filestyle input-group-btn"><label class="btn btn-default "><i class="fa fa-upload" aria-hidden="true"></i>&nbsp;&nbsp; Upload CSV</label></span>
											</div>
										</div>
									</div>
								</div>
								<div class="filterfields" ng-hide="filtershow">
									<div class="col-sm-4 col-md-3">
										<label for="fbtext" class="control-label">Search by text</label> 
										<input type="text" class="form-control" id="fbtext" ng-model="text">
									</div>
									<div class="col-sm-4 col-md-3">
										<label for="fbtitle" class="control-label">Search by title</label>
										<input type="text" class="form-control" id="fbtitle" ng-model="title">
									</div>
									<div class="col-sm-4 col-md-3">
										<label for="fblocation" class="control-label">Search by facility</label>
										<input type="text" class="form-control" id="fblocation" ng-model="facility">
									</div>
								</div>
							</div>							
							<div ng-if="result">									
								<div layout="row" ng-class="statusclass">									
									{{result}}
								</div>
							</div>
							<div ng-class="class">
								<div class="glview">
									<md-content>			
										<!-- <md-card ng-repeat="user in usergroups | filter:text | filter:title | filter:facility | orderBy:myOrderBy"> -->
										<md-card ng-repeat="user in usergroups">
											<img ng-src="{{imagePath}}/usergroups/{{user.imagename}}.jpg" class="md-card-image img100percent" alt="Washed Out">
											<md-card-content>
												<h2 class="md-title">{{ user.usergroup_name }}</h2>	
												<p>{{ user.usergroup_user_count }} Users</p>
											</md-card-content>
											<div class="md-actions" layout="row" layout-align="center center">
												<button ui-sref="app.admin.user.user-groups-members({usergroup_id:user.usergroup_id,userGroupName:user.usergroup_name,userGroupUserCount:user.usergroup_user_count})" class="btn btn-orange btn-border btn-rounded btnMargin">View</button>
												<div ng-controller="ModalDemo1Ctrl">
													<script type="text/ng-template" id="myModalContent1.html">
														<div class="modal-header">
															<h4 class="modal-title custom-font">Edit User Groups</h4>
														</div>
														<div class="modal-body hometabs usergroups p-0">		
															<md-content class="md-padding tabsdemoDynamicHeight p-0 pt-20">
															<md-tabs md-dynamic-height md-border-bottom>		
																<md-tab label="Group Name">
																<md-content>	
																	<form name="editUserGroup" ng-submit="editUserGroupp(usergroupedit)" role="form" ng-validate="validationOptions">
																		<div class="p-15">
																			<div class="row mt-10">
																			<div class="form-group col-sm-12 col-md-12">
																				<label for="">Group Name</label>
																				<input type="text" name="usergroup_name" id="usergroup_name" class="form-control" ng-model="usergroupedit.usergroup_name" value="usergroupedit.usergroup_name" placeholder="">
																			</div>
																			<div class="form-group col-sm-12 col-md-12">
																				<label for="">Facility{{usergroupedit.facilities}}</label><br/>
																				<input type="text" name="facility_name" id="facility_name" class="form-control" ng-model="usergroupedit.facility_name" disabled placeholder="usergroupedit.facility_name">
																			</div>
																			</div>
																			<div class="modal-footer" style="margin: 20px -15px -15px;">	
																			<div class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Close</div>
																			<button type="submit" class="btn btn-success btn-rounded btn-ef btn-ef-3 btn-ef-3c"><i class="fa fa-arrow-right"></i> Next</button>	
																			</div>
																		</div>
																	</form>			
																</md-content>
																</md-tab>
																
																<md-tab label="Door Schedule" ng-click="listDoorSchedule(usergroupedit.usergroup_id, usergroupedit.facility_id)">
																<md-content>
																	<div class="tile-body p-15">
																		<table class="table table-bordered">
																			<thead>
																				<tr>
																					<th>Door/Door Groups</th>
																					<th width="222">Schedule Groups</th>
																				</tr>
																			</thead>
																			<tbody>
																				<tr ng-repeat="doorlist in listDoorGroup">
																					<td>{{doorlist.door_name}}</td>
																					<td>
																						<span class="loader" id="{{doorlist.ud_id}}" style="display: none;"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i></span>
																						<select class="form-control" ng-model="doorlist.is_access_allowed" ng-options="item.is_access_allowed as item.name for item in doorlist.schedulelist" ng-change="addDoorScheduleUserGroup(doorlist.schedule_id, doorlist.ud_id,doorlist.is_access_allowed)"  >
																						</select>
																						
																					</td>
																				</tr>
																			</tbody>
																		</table>
																		<div class="modal-footer" style="margin: 20px -15px -15px;">
																			<div class="btn btn-success btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Done</div>
																		</div>
																	</div>
																</md-content>
																</md-tab>
															</md-tabs>
															</md-content>
														</div>						
													</script>
													<button ng-click="showEditForm(user.usergroup_id,user.usergroup_name,user.usergroup_facility_id, user.facility.facility_name)" class="btn btn-success btn-border btn-rounded btnMargin">Edit</button>
												</div>												
												<button class="btn btn-danger btn-border btn-rounded btnMargin" disabled ng-click="showConfirm($event, user.usergroup_id)">Delete</button>
											</div>
										</md-card>										
									</md-content>
									<button class="btn btn-success btn-border btn-rounded m-0-auto f-wm" ng-click="getUserGroupList()" ng-style="lmbtn" >Load more</button>
								</div>
							</div>
						</div>
					</div>	
				</section>
			</div>
		</div>
	</div>
</div>