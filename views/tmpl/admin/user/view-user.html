<div class="page page-profile">
	<div class="pageheader backpage">
		<a href back-button><i class="fa fa-arrow-left"></i> Back</a>
		<div class="facility-view elika-facility-name"></div>
	</div>

	<div class="pagecontent">
		<div class="row">
			<div class="dnone card-container col-sm-3 col-md-3">
				<div class="card">
					<div class="bg-dashboard">
						<div class="bg-transparent usersbg">
							<div class="row">
								<div class="col-md-12">
									<h3 class="custom-font">{{page.title}}</h3>
									<p>{{page.subtitle}}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<flip-header></flip-header>
		</div>

		<div ng-if="result">
			<div layout="row" ng-class="statusclass">
				{{result}}
			</div>
		</div>
		<div ng-controller="ModalDemo2Ctrl" >
		<script type="text/ng-template" id="myModalContentView.html">
			<div class="modal-header"><h4 class="modal-title custom-font">View Schedule</h4></div>
			<div class="modal-body p-30" >
				<p class="ng-scope"><label class="ng-binding"><strong>Schedule Type: </strong></label>
					<span>{{scheduleview.schedule_category}}</span>
				</p>
				<p ng-if="scheduleview.schedule_category == 'repeat'">
					<label><strong>Start Date: </strong></label><span> 
					{{scheduleview.schedule_start_time*1000 | date:'dd/MM/yyyy': 'UTC'}}</span>
				</p>
				<p ng-if="scheduleview.schedule_category == 'repeat'">
					<label><strong>Expiration Date: </strong></label><span ng-if="scheduleview.schedule_expiration_date != null"> {{scheduleview.schedule_expiration_date*1000 | date:'dd/MM/yyyy': 'UTC'}}</span><span ng-if="scheduleview.schedule_expiration_date == null"> No Expiration</span>
				</p>
				<label class="ng-binding"><strong>Schedule: </strong></label>
				<p ng-repeat="schedule_inp in scheduleview.schedule_input" class="ng-scope">{{schedule_inp.day}} <span> {{schedule_inp.starttime + ' - '+ schedule_inp.endtime + ' ' + schedule_inp.date}}</span><span ng-if="scheduleview.schedule_input.length == 0"> No Schedule</span></p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Cancel</button>
			</div>
		</script>
		<!-- <script type="text/ng-template" id="myModalContent2.html">
			<form name="form1" role="form"  >
				<div class="modal-header"><h4 class="modal-title custom-font">Add Schedule</h4></div>
				<div class="modal-body p-30" >
					<div class="overflow check_view"  style="pointer-events: none;">
						<label for=""><strong>Schedule Type</strong></label>
						<div class="row">
							<div class="col-sm-6 col-md-6 form-group" ng-click="custom_schedular()">
								<label class="checkbox checkbox-custom-alt mb-0" ng-click="visibiltyUserGroup=true">
									<input name="customRadioAlt" ng-model="schedule.schedule_type" value="ONETIME" type="radio" ng-init="schedule.schedule_type='ONETIME'" ><i></i> One Time
								</label>
							</div>
							<div class="col-sm-6 col-md-6 form-group" ng-click="repetive_schedular()">
								<label class="checkbox checkbox-custom-alt mb-0" ng-click="visibiltyUserGroup=false">
									<input name="customRadioAlt" ng-model="schedule.schedule_type" value="REPEATING" type="radio" ><i></i> Repeating
								</label>
							</div>
						</div>
					</div>
					<div class="row check_view" ng-init="visibiltyUserGroup=true"  ng-hide="visibiltyUserGroup"  style="pointer-events: none;">
						<div class="col-sm-6 col-md-6 pr-0 form-group">
							<label for="">Start Date</label>
							<div class="input-group" ng-controller="DatepickerDemoCtrl">
								<input type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy"  ng-model="schedule.date"  is-open="opened" datepicker-options="dateOptions" close-text="Close" name="date" onkeypress="return false;"/>
								<span class="input-group-btn">
									<button type="button" class="btn btn-default" ng-click="open($event)" style="padding: 8px 14px;"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</div>
						</div>
						<div class="col-sm-1 col-md-1 form-group">&nbsp;</div>
						<div class="form-group col-sm-6 col-md-5"  ng-init="schedule.no_expirations=1" >
							<label for="">&nbsp;</label><br/>
							<label class="checkbox checkbox-custom-alt" style="margin-bottom:8px;">
								<input name="customRadioAlt" type="checkbox" checked="checked" ng-model="schedule.no_expirations" ng-true-value="1" ng-false-value="0"><i></i> No Expirations
							</label>											
						</div>
						<div class="form-group col-sm-6 col-md-6" ng-hide="schedule.no_expirations">
							<label for="">Expiration Date</label>
							<div class="input-group" ng-controller="DatepickerDemoCtrl">
								<input type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy"  ng-model="schedule.expiration" is-open="opened" min-date="schedule.schedule_start_date" datepicker-options="dateOptions"  close-text="Close" onkeypress="return false;"/>
								<span class="input-group-btn">
									<button type="button" class="btn btn-default" ng-click="open($event)" style="padding: 8px 14px;"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</div>
						</div>
					</div>
					<div class="row" >
						<div class="col-sm-12 col-md-12" >
							<div class="schedule_scroll">
								<div id="scheduler_here" class="dhx_cal_container" style='height:300px;' >
									<div class="dhx_cal_navline">
										<div class="dhx_cal_prev_button" >&nbsp;</div>
										<div class="dhx_cal_next_button" >&nbsp;</div>
										<div class="dhx_cal_today_button" ></div>
										<div class="dhx_cal_date" style="display: none;"></div>
									</div>
									<div class="dhx_cal_header"></div>
									<div class="dhx_cal_data"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Cancel</button>
				</div>
			</form>		
		</script> -->
		</div>
		
		<div class="row">
			<div class="col-sm-12 col-md-4">
				<section class="tile tile-simple">
					<div class="leftdetail tile-widget p-30 text-center">
						<div class="thumb thumb-xxll">
							<img class="img-circle" ng-src="{{userData.user_photo}}" onerror="this.onError=null;this.src='images/users/2.jpg';" alt="">
						</div>
						<h4 class="mb-0"><strong>{{userData.user_first_name}} {{userData.user_last_name}}</strong></h4>
						<span class="text-muted">{{userData.user_phone_no|tel}}</span>
						<div class="mt-40">
							<a ui-sref="app.admin.user.edit-user({user_id: editUser.user_id})" class="btn btn-rounded-20 btn-sm btn-greensea">Edit User</a>
							<a ng-click="deleteUser($event,editUser.user_id)" class="btn btn-rounded-20 btn-sm bg-danger ml-5">Delete User</a>
						</div>

					</div>
					<div class="tile-body text-center bg-blue p-0">
						<ul class="list-inline tbox m-0">
							<li class="tcol bg-blue dker p-10">
								<h2 class="m-0">{{groupcount}}</h2>
								<span class="text-transparent-white">User Groups</span>
							</li>
						</ul>
					</div>
				</section>
			</div>

			<div class="col-sm-12 col-md-8">
				<section class="tile tile-simple">
					<div class="tile-body p-0">
						<div class="tile-header dvd dvd-btm">
							<h1 class="custom-font">{{userData.user_first_name}}</h1>
						</div>
						<div class="hometabs">
							<div class="wrap-reset m-0 pt-20">
								<div class="row">
									<div class="col-sm-12 col-md-12">
										<div class="form-group legend">
											<h4><strong>Account</strong> Details</h4>
										</div>
										<div class="form-group profiledetail">
											<p><label>Name</label><span class="rightdetails">{{userData.user_first_name}} {{userData.user_last_name}}</span></p>
											<p><label>E-mail</label><span class="rightdetails">{{userData.user_email}}</span></p>
											<p><label>Phone</label><span class="rightdetails">{{userData.user_phone_no|tel}}</span></p>
											<p><label>LCD Name</label><span class="rightdetails">{{userData.user_name_on_lcd}}</span></p>
											<p><label>Address</label><span class="rightdetails">{{userData.user_address}}</span></p>
											<p><label>Zip Code</label><span class="rightdetails">{{userData.user_zipcode}}</span></p>
											<p><label>Status</label><span class="rightdetails">{{userData.user_status}}</span></p>
											<p ng-if="userData.user_expiration_date!='0'"><label>Expiration Date</label><span class="rightdetails">{{userData.user_expiration_date*1000 | date:'dd/MM/yyyy': 'UTC'}}</span></p>
										</div>
									</div>
								</div>
								<div class="row mt-40">
									<div class="col-sm-12 col-md-12 profiledetail">
										<div class="form-group legend">
											<h4><strong>Assigned</strong> Credentials</h4>
										</div>
										<div class="credintials mt-20" ng-controller="AccordionDemoCtrl">
											<uib-accordion close-others="oneAtATime">
												<uib-accordion-group is-open="status.isFirstOpen" class="panel-default">
													<uib-accordion-heading>Access Code <i class="pull-right fa" ng-class="{'fa-minus': status.isFirstOpen, 'fa-plus': !status.isFirstOpen}"></i></uib-accordion-heading>
													<div class="modal-body p-0">
														<span class="error">{{AccessCodeMessage}}</span>
														<div class="tile-body p-0 table-responsive">
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th width="200">Access Code</th>
																		<th width="600">Assigned Doors</th>
																		<th width="100" class="ta-c">Schedules</th>
																		<th width="100" class="ta-c">Status</th>
																	</tr>
																</thead>
																<tbody style="font-size:14px;">
																	<tr ng-repeat="accesscode in access_code_list">
																		<td>{{accesscode.Access_Code}}</td>
																		<td>{{accesscode.Door_Name}}</td>
																		<td class="credintialicon ta-c">
																			<a href="" uib-tooltip="View" ng-controller="ModalDemo2Ctrl" ng-click="viewschedule(accesscode.credential_schedule_id)" ng-if="accesscode.credential_schedule_id"><i class="fa fa-eye" aria-hidden="true"></i></a> 
																		</td>
																		<td class="ta-c">{{accesscode.status==0?'Inactive':'Active'}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</uib-accordion-group>

												<uib-accordion-group is-open="status.open1" class="panel-default">
													<uib-accordion-heading>Phone Code <i class="pull-right fa" ng-class="{'fa-minus': status.open1, 'fa-plus': !status.open1}"></i></uib-accordion-heading>
													<div class="modal-body p-0">
														<div class="tile-body p-0 table-responsive">
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th width="200">Phone Code</th>
																		<th width="400">Assigned Doors</th>
																		<th width="200">Phone Number</th>
																		<th width="100" class="ta-c">Schedules</th>
																		<th width="100" class="ta-c">Status</th>
																	</tr>
																</thead>
																<tbody style="font-size:14px;">
																	<tr ng-repeat="phone_code in phone_code_list">
																		<td>{{phone_code.Detail.phone_code}}</td>
																		<td>{{phone_code.Door_Name}}</td>
																		<td>
																			<div ng-repeat="phone in phone_code.Detail.phone_numbers">{{phone.phone_number|tel}}</div>
																		</td>
																		<td class="credintialicon ta-c">
																			<a href="" uib-tooltip="View" ng-controller="ModalDemo2Ctrl" ng-click="viewschedule(phone_code.credential_schedule_id)" ng-if="phone_code.credential_schedule_id" ><i class="fa fa-eye" aria-hidden="true"></i></a>
																		</td>
																		<td class="ta-c">{{phone_code.status==0?'Inactive':'Active'}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</uib-accordion-group>
												
												<!-- <uib-accordion-group is-open="status.open2" class="panel-default">
													<uib-accordion-heading>RFID Code <i class="pull-right fa" ng-class="{'fa-minus': status.open2, 'fa-plus': !status.open2}"></i></uib-accordion-heading>
													<div class="modal-body p-0">
														<div class="tile-body p-0 table-responsive">
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th width="200">Card Number</th>
																		<th width="450">Assigned Doors</th>
																		<th width="150">Facility Code</th>
																		<th width="100" class="ta-c">Schedules</th>
																		<th width="100" class="ta-c">Status</th>
																	</tr>
																</thead>
																<tbody style="font-size:14px;">
																	<tr ng-repeat="rfid_code in rfid_code_list">
																		<td>{{rfid_code.Detail.rfid_card_no}}</td>
																		<td>{{rfid_code.Door_Name}} </td>
																		<td>{{rfid_code.Detail.rfid_facility_id}}</td>
																		<td class="credintialicon ta-c"></td>
																		<td class="ta-c">{{rfid_code.status==0?'Inactive':'Active'}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</uib-accordion-group> -->
												
												<uib-accordion-group is-open="status.open3" class="panel-default">
													<uib-accordion-heading>Wiegand Code <i class="pull-right fa" ng-class="{'fa-minus': status.open3, 'fa-plus': !status.open3}"></i></uib-accordion-heading>
													<div class="modal-body p-0">
														<span class="error">{{ bleerror }}</span>
														<div class="tile-body p-0 table-responsive">
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th width="200">Card Number</th>
																		<th width="450">Assigned Doors</th>
																		<th width="150">Facility Code</th>
																		<th width="100" class="ta-c">Schedules</th>
																		<th width="100" class="ta-c">Status</th>
																	</tr>
																</thead>
																<tbody style="font-size:14px;">
																	<tr ng-repeat="wiegand_code in wiegand_code_list">
																		<td>{{wiegand_code.Detail.wiegand_card_number}}</td>
																		<td>{{wiegand_code.Door_Name}}</td>
																		<td>{{wiegand_code.Detail.wiegand_facility_code}}</td>
																		<td class="credintialicon ta-c">
																			<a href="" uib-tooltip="View" ng-controller="ModalDemo2Ctrl" ng-click="viewschedule(wiegand_code.credential_schedule_id)" ng-if="wiegand_code.credential_schedule_id"><i class="fa fa-eye" aria-hidden="true"></i></a>
																		</td>
																		<td class="ta-c">{{wiegand_code.status==0?'Inactive':'Active'}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</uib-accordion-group>
												
												<!-- <uib-accordion-group is-open="status.open4" class="panel-default">
													<uib-accordion-heading>NFC Code <i class="pull-right fa" ng-class="{'fa-minus': status.open4, 'fa-plus': !status.open4}"></i></uib-accordion-heading>
													<div class="modal-body p-0">														
														<span class="error">{{NfcCodeMessage}}</span>
														<div class="tile-body p-0 table-responsive">
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th width="200">NFC Code</th>
																		<th width="450">Assigned Doors</th>
																		<th width="150">Facility Code</th>
																		<th width="100" class="ta-c">Schedules</th>
																		<th width="100" class="ta-c">Status</th>
																	</tr>
																</thead>
																<tbody style="font-size:14px;">
																	<tr ng-repeat="nfccode in nfc_code_list">
																		<td>{{nfccode.Detail.nfc_code}}</td>
																		<td>{{nfccode.Door_Name}}</td>
																		<td></td>
																		<td class="credintialicon ta-c"></td>
																		<td class="ta-c">{{nfccode.status==0?'Inactive':'Active'}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</uib-accordion-group> -->
												
												<uib-accordion-group is-open="status.open5" class="panel-default">
													<uib-accordion-heading>BLE Code <i class="pull-right fa" ng-class="{'fa-minus': status.open5, 'fa-plus': !status.open5}"></i></uib-accordion-heading>
													<div class="modal-body p-0">														
														<span class="error">{{ bleerror }}</span>														
														<div class="tile-body p-0 table-responsive">
															<table class="table table-bordered">
																<thead>
																	<tr>
																		<th width="200">Username</th>
																		<th width="200">Password</th>
																		<th width="400">Assigned Doors</th>
																		<th width="100" class="ta-c">Schedules</th>
																		<th width="100" class="ta-c">Status</th>
																	</tr>
																</thead>
																<tbody style="font-size:14px;">
																	<tr ng-repeat="blecode in ble_code_list">
																		<td>{{blecode.Detail.ble_username}}</td>
																		<td>{{blecode.Detail.ble_password}}</td>
																		<td>{{blecode.Door_Name}}</td>
																		<td class="credintialicon ta-c">
																			<a href="" uib-tooltip="View" ng-controller="ModalDemo2Ctrl" ng-click="viewschedule(blecode.credential_schedule_id)" ><i class="fa fa-eye" aria-hidden="true" ng-if="blecode.credential_schedule_id"></i></a>
																		</td>
																		<td class="ta-c">{{blecode.status==0?'Inactive':'Active'}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</uib-accordion-group>
											</uib-accordion>
										</div>
									</div>
								</div>
								<div class="usergroup row mt-40">
									<div class="col-sm-12 col-md-12 profiledetail">
										<div class="form-group legend">
											<h4><strong>Assigned</strong> Groups</h4>
										</div>
										<div class="form-group">
											<div class="tile-body p-0 table-responsive">
												<table class="table table-bordered">
													<thead>
														<tr>
															<th>Group Name</th>
														</tr>
													</thead>
													<tbody style="font-size:14px;">
														<tr ng-repeat="x in userGroup">
															<td><a ui-sref="app.admin.user.user-groups-members({usergroup_id:x.usergroup_id,userGroupName:x.usergroup_name,userGroupUserCount:x.usergroup_user_count})" ng-click="cancel()">{{x.usergroup_name}} <small>({{x.usergroup_user_count}} Users)</small></a></td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
	</div>
</div>