<div class="page page-profile">
	<div class="pageheader backpage">		
		<a href back-button><i class="fa fa-arrow-left"></i> Back</a>
	</div>
	
	<div class="pagecontent">
		<div class="row">		
			<div class="card-container col-lg-3 col-sm-6 col-sm-12">
				<div class="card">
					<div class="bg-dashboard pdevicebg">
						<div class="bg-transparent  usersbg">
							<div class="row">
								<div class="col-md-12">
									<h3 class="custom-font">{{page.title}}</h3>
									<p>{{page.subtitle}}</p>									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<flip-header></flip-header>		
		</div>
		<div class="row">
			<div class="col-md-4">
				<section class="tile tile-simple">
					<div class="tile-widget p-30 text-center">
						<div class="thumb thumb-xxll">
							<img class="img-circle" src="images/users/2.jpg" alt="">
						</div>
						<h4 class="mb-0"><strong>{{userData.user_first_name}} {{userData.user_last_name}}</strong></h4>
						<span class="text-muted">{{userData.phone_number_1}}</span>
						<div class="mt-40">
							<button class="btn btn-rounded-20 btn-sm btn-greensea">Send Message</button>
							<button class="btn btn-rounded-20 btn-sm btn-lightred" ng-click="deleteUser($event,editUser.user_id)">Delete User</button>
						</div>
					</div> 
					<div class="tile-body text-center bg-blue p-0"> 
						<ul class="list-inline tbox m-0">
							<li class="tcol p-10">
								<h2 class="m-0">4</h2>
								<span class="text-transparent-white">Keys</span>
							</li>
							<li class="tcol bg-blue dk p-10">
								<h2 class="m-0">3</h2>
								<span class="text-transparent-white">User Groups</span>
							</li>
						</ul>
					</div>  
				</section> 
				<section class="tile tile-simple"> 
					<div class="tile-body">
						<h2 class="custom-font mt-0">Description</h2>
						<p class="text-default lt">{{userData.user_description}}</p> 
					</div> 
				</section> 
			</div>
			
			<div class="col-md-8"> 
				<section class="tile tile-simple"> 
					<div class="tile-body p-0"> 
						<uib-tabset class="tabs-dark"> 
						
							<uib-tab heading="Profile Detail">
								<div class="wrap-reset">
									<div class="row">
										<div class="col-md-6">
											<div class="form-group legend">
												<h4><strong>Account</strong> Details</h4>
											</div>
											<div class="form-group profiledetail">
												<p><label>Name</label> {{userData.user_first_name}} {{userData.user_last_name}}</p>
												<p><label>E-mail</label>{{userData.user_email}}</p>
												<p><label>Phone</label>{{userData.phone_code}}</p>
												<p><label>Address</label>{{userData.user_address}}</p>
												<p><label>Status</label>{{userData.user_status}}</p>
												<p><label>Expiration Date</label>{{userData.user_expiration_date}}</p>
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group legend">
												<h4><strong>User</strong> Groups</h4>
											</div>
											<div class="form-group">													
												<div class="tile-body p-0">
													<table class="table table-bordered">
														<thead>
															<tr>
																<th>{{nogroup ? nogroup : "Group Name"}}</th>
															</tr>
														</thead>
														<tbody>
															<tr ng-repeat="x in userGroup">
																<td>{{x.usergroup_name}}</td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
									<div class="row mt-20">
										<div class="col-md-12 profiledetail">
											<div class="form-group legend">
												<h4><strong>Credentials</strong> Details</h4>
											</div>
											<div class="row">
												<div class="col-md-6">
													<p class="greenseatx"><label>Access Code</label></p>
													<p><label>Code</label>{{userData.access_code ? userData.access_code : "NA"}}</p>
													<p><label>Status</label> {{userData.access_status ? userData.access_status : "NA"}}</p>	
												</div>
												<div class="col-md-6">
													<p class="greenseatx"><label>NFC Code</label></p>
													<p><label>Code</label> xxxxx-xx-xx</p>
													<p><label>Status</label> Active</p>	
												</div>
											</div>
											<div class="row mt-20">
												<div class="col-md-6">
													<p class="greenseatx"><label>RFID Code</label></p>
													<p><label>Card Number</label> {{userData.rfid_card_number ? userData.rfid_card_number : "NA"}}</p>
													<p><label>Facility Code</label> {{userData.rfid_facility_code ? userData.rfid_facility_code : "NA"}}</p>
													<p><label>Status</label> {{userData.rfid_sttaus}}</p>	
												</div>
												<div class="col-md-6">
													<p class="greenseatx"><label>BLE Code</label></p>
													<p><label>Username</label> {{userData.ble_name ? userData.ble_name : "NA"}}</p>
													<p><label>Password</label> {{userData.ble_pass ? userData.ble_pass : "NA"}}</p>
													<p><label>Status</label> {{userData.ble_status}}</p>	
												</div>
											</div>
											<div class="row mt-20">
												<div class="col-md-6">
													<p class="greenseatx"><label>Phone Code</label></p>
													<p><label>Code</label> {{userData.phone_code ? userData.phone_code : "NA"}}</p>
													<p><label>Status</label>{{userData.phone_status}}</p>
													<p>
														<label>Phone</label> 
														<span style="display:inline-block;vertical-align:top;">
															{{userData.phone_number_1 ? userData.phone_number_1 : "NA"}}<br/>
															{{userData.phone_number_2 ? userData.phone_number_2 : "NA"}}<br/>
															{{userData.phone_number_3 ? userData.phone_number_3 : "NA"}}<br/>
															{{userData.phone_number_4 ? userData.phone_number_4 : "NA"}}
														</span>
													</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</uib-tab>
							<uib-tab heading="Edit Account">
								<div class="wrap-reset"> 
									<div class="form-group legend">
										<h4><strong>Edit</strong> Account</h4>
									</div>
									<span ng-repeat="e in editUserMessage" class="error">{{e}}</span>
									<form role="form" ng-submit="submitEditUser(editUser, user_edit)" name="user_edit" ng-validate="validationOptions">
										<div class="modal-body">
											<div class="form-group row">
												<div class="col-sm-6">
													<label for="first-name">First Name <span class="text-danger">*</span></label>
													<input type="text" class="form-control" id="first-name" ng-model="editUser.first_name" ng-value="userData.user_first_name" name="first-name" required>
												</div>
												<div class="col-sm-6">
													<label for="last-name">Last Name <span class="text-danger">*</span></label>
													<input type="text" class="form-control" id="last-name" ng-model="editUser.last_name" ng-value="userData.user_last_name" name="last-name" required>
												</div>
											</div>
											<div class="form-group row">										
												<div class="col-sm-6">
													<label for="email">E-mail Address <span class="text-danger">*</span></label>
													<input type="email" class="form-control" id="email" ng-model="editUser.email" ng-value="userData.user_email" readonly>
												</div>
												<div class="col-sm-6 editprofile">
													<label for="profile">Profile Photo</label>
													<div class="profilephoto">
														<input ui-jq="filestyle" type="file" class="filestyle profilep" ui-options="{ buttonText: 'Find file', iconName: 'fa fa-inbox' }" id="profilep-2" tabindex="-1">
														<div class="bootstrap-filestyle input-group"><input type="text" class="form-control " disabled=""> <span class="group-span-filestyle input-group-btn" tabindex="0"><label for="profilep-2" class="btn btn-default "><span class="glyphicon fa fa-inbox"></span> Find file</label></span></div>
													</div>
												</div>
											</div>										
											<div class="form-group row">
												<div class="col-sm-6">
													<label for="first-name">Phone Number <span class="text-danger">*</span></label>
													<input type="number" class="form-control" ng-keypress="onlyNumber($event)" id="user_phone_no" ng-model="editUser.user_phone_no">
												</div>
												<div class="col-sm-6">
													<label for="address1">Address <span class="text-danger">*</span></label>
													<input type="text" class="form-control" id="address1" ng-model="editUser.address" ng-value="userData.user_address" name="address1" required>
												</div>
											</div>										
											<div class="form-group row">
												<div class="col-sm-12">
													<label for="bio">Description <span class="text-danger">*</span></label>
													<textarea class="form-control" id="bio" ng-model="editUser.description" style="height:125px;" name="bio" required>{{userData.description}}</textarea>
												</div>
											</div>
											<div class="form-group row" ng-controller="ActivebtnCtrl">
												<div class="col-md-6">
													<div class="row">
														<div class="col-md-5 pr-0">
															<label for="">Status <span class="text-danger">*</span></label><br/>
															<div class="btn-group btnrounded">
																<label class="btn btn-default" ng-model="editUser.user_status" uib-btn-radio="1">Active</label>
																<label class="btn btn-default" ng-model="editUser.user_status" uib-btn-radio="0">Inactive</label>
															</div>
														</div>
														<div class="col-md-7" ng-hide="editUser.user_status==0">
															<div ng-controller="DatepickerDemoCtrl">
																<label for="">Expiration Date <span class="text-danger">*</span></label>
																<div class="input-group">
																	<input type="text" class="form-control" uib-datepicker-popup="{{format}}"  ng-model="editUser.expiration_date" min-date="mindate" is-open="opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" ng-value="editUser.expiration_date"/>
																	<span class="input-group-btn">
																		<button type="button" class="btn btn-default" ng-click="open($event)" style="padding: 8px 14px;"><i class="glyphicon glyphicon-calendar"></i></button>
																	</span>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
											<div class="form-group row legend">
												<div class="col-md-12">
													<p></p>
													<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
													<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Save</button>
												</div>
											</div>
										</div>
									</form>
								</div>
							</uib-tab>
							
							<uib-tab heading="Edit Credentials">
								<div class="wrap-reset"> 
									<div class="form-group legend">
										<h4><strong>Edit</strong> Credentials</h4>
									</div>
										<div class="modal-body">
											<div class="form-group row">
												<div class="col-sm-6">
													<form role="form"  ng-submit="submitEditAccessCode(editUser, access_edit_form)" ng-validate="validationOptions" name="access_edit_form">
														<div class="form-group greenseatx"><strong>Access Code</strong></div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Code</label>
															</div>
															<div class="col-md-8">
																<input type="text" class="form-control number" ng-keypress="onlyNumber($event)" id="access_code" ng-model="editUser.access_code" name="access_code" required>
																<span class="refreshbtn" ng-click="generateAccessCode()"><i class="fa fa-refresh"></i></span>
																<span class="error" ng-show="errormessage.accessrequired">
																	Access-Code is a required field.
																</span>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Status</label>
															</div>
															<div class="col-md-8">
																<div class="btn-group btnrounded status" ng-controller="ActivebtnCtrl">
																	<label class="btn btn-default" ng-model="radioModel" uib-btn-radio="'Active'">Active</label>
																	<label class="btn btn-default" ng-model="radioModel" uib-btn-radio="'Inactive'">Inactive</label>
																</div>
															</div>
														</div>
														<div class="form-group row legend">
															<div class="col-md-12">
																<p></p>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Save</button>
															</div>
														</div>
													</form>
												</div>
												<div class="col-sm-6">
													<span class="error">{{NfcCodeMessage}}</span>
													<form ng-submit="submitEditNfcCode(editUser, nfc_edit_form)" ng-validate="validationOptions" name="nfc_edit_form">
														<div class="form-group greenseatx"><strong>NFC Code</strong></div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Code</label>
															</div>
															<div class="col-md-8">
																<input type="text" class="form-control w-md" id="" value="xxxxxx-xx" name="nfc_code" ng-model="editUser.nfc_code" required>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Status</label>
															</div>
															<div class="col-md-8">
																<div class="btn-group btnrounded status" ng-controller="ActivebtnCtrl">
																	<label class="btn btn-default" ng-model="editUser.nfc_code_status" uib-btn-radio="1">Active</label>
																	<label class="btn btn-default" ng-model="editUser.nfc_code_status" uib-btn-radio="0">Inactive</label>
																</div>
															</div>
														</div>
														<div class="form-group row legend">
															<div class="col-md-12">
																<p></p>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Save</button>
															</div>
														</div>
													</form>
												</div>
											</div>
											<div class="form-group row mt-40">
												<div class="col-sm-6">
													<span class="error">{{EditRFIDCodeMsg}}</span>
													<form ng-submit="submitEditRFIDCode(editUser, rfid_form)" name="rfid_form" ng-validate="validationOptions" >
														<div class="form-group greenseatx"><strong>RFID Code</strong></div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Card Number</label>
															</div>
															<div class="col-md-8">
																<input type="text" class="form-control number" ng-keypress="onlyNumber($event)" id="" ng-model="editUser.rfid_card_no" name="rfid_card_no" required>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Facility Code</label>
															</div>
															<div class="col-md-8">
																<input type="text" class="form-control number" id="" ng-keypress="onlyNumber($event)" ng-model="editUser.rfid_facility_code" name="rfid_facility_code" required>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Status</label>
															</div>
															<div class="col-md-8">
																<div class="btn-group btnrounded status" ng-controller="ActivebtnCtrl">
																	<label class="btn btn-default" ng-model="editUser.rfid_status" uib-btn-radio="1">Active</label>
																	<label class="btn btn-default" ng-model="editUser.rfid_status" uib-btn-radio="0">Inactive</label>
																</div>
															</div>
														</div>
														<div class="form-group row legend">
															<div class="col-md-12">
																<p></p>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Save</button>
															</div>
														</div>
													</form>
												</div>
												<div class="col-sm-6">
													<form ng-submit="submitEditBLECode(editUser, ble_edit_form)" ng-validate="validationOptions" name="ble_edit_form">
														<div class="form-group greenseatx"><strong>BLE Code</strong></div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Username</label>
															</div>
															<div class="col-md-8">
																<input type="text" class="form-control" id="" ng-model="editUser.ble_name" name="ble_name" required>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Password</label>
															</div>
															<div class="col-md-8">
																<input type="password" class="form-control" id="" ng-model="editUser.ble_pass" name="ble_pass" required>
															</div>
														</div>
														<!--div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Confirm Password</label>
															</div>
															<div class="col-md-8">
																<input type="password" class="form-control w-md" id="" value="xxxxxx-xx">
															</div>
														</div-->
														<div class="row">
															<div class="col-md-4 pr-0 lh-38">
																<label for="">Status</label>
															</div>
															<div class="col-md-8">
																<div class="btn-group btnrounded status" ng-controller="ActivebtnCtrl">
																	<label class="btn btn-default" ng-model="radioModel" uib-btn-radio="'Active'">Active</label>
																	<label class="btn btn-default" ng-model="radioModel" uib-btn-radio="'Inactive'">Inactive</label>
																</div>
															</div>
														</div>
														<div class="form-group row legend">
															<div class="col-md-12">
																<p></p>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
																<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Save</button>
															</div>
														</div>
													</form>
												</div>
											</div>
											<div class="form-group row mt-40">
												<div class="col-sm-6">
													<form>
													<div class="form-group greenseatx"><strong>Phone Code</strong></div>
													<div class="row">
														<div class="col-md-4 pr-0 lh-38">
															<label for="">Code</label>
														</div>
														<div class="col-md-8">
															<input type="text" class="form-control number" ng-keypress="onlyNumber($event)" id="" ng-value="editUser.phone_code">
															<span class="refreshbtn" ng-click="generatePhoneCode()"><i class="fa fa-refresh"></i></span>
														</div>
													</div>
													<div class="row">
														<div class="col-md-4 pr-0 lh-38">
															<label for="">Status</label>
														</div>
														<div class="col-md-8">
															<div class="btn-group btnrounded status" ng-controller="ActivebtnCtrl">
																<label class="btn btn-default" ng-model="editUser.phone_code_status" uib-btn-radio="1">Active</label>
																<label class="btn btn-default" ng-model="editUser.phone_code_status" uib-btn-radio="0">Inactive</label>
															</div>
														</div>
													</div>
													<div class="row">
														<div class="col-md-4 pr-0 lh-38">
															<label for="">Phone</label>
														</div>
														<div class="col-md-8 editaddphone">
															<div class="widget-todo w-md" ng-controller="TodoWidgetCtrl">
																<form class="form-horizontal" role="form" ng-submit="addTodo()">
																	<input type="text" class="form-control" id="todo" ng-model="todo" placeholder="" required ng-model="editUser.phone_numbers" ng-value="editUser.phone_numbers">
		   														<button type="submit" class="btn addphone" ng-click="addTodo()"><i class="fa fa-plus"></i></button>
																</form>

																<ul class="todo-list list-unstyled">
																  <li ng-repeat="todo in todos" ng-class="{completed: todo.completed, editing: todo == editedTodo}">
																	<div class="view">					 
																		<span ng-dblclick="editTodo(todo)">{{todo.text}}</span>
																		<a href="javascriph:;" class="text-danger remove-todo pull-right" ng-click="removeTodo(todo)" aria-label="Remove"><i class="fa fa-times"></i></a>
																	</div>
																	<form ng-submit="doneEditing(todo)">
																		<input class="form-control edit mb-0" ng-trim="false" ng-model="todo.text" ng-blur="doneEditing(todo)" todo-escape="revertEditing(todo)" todo-focus="todo == editedTodo" ui-jq="inputmask" ui-options="{'mask': '###-###-####'}">
																	</form>
																  </li>
																</ul>
															</div>
														</div>
													</div>
													<div class="form-group row legend">
														<div class="col-md-12">
															<p></p>
															<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
															<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a" ng-click="submitEditPhoneCode(editUser)">Save</button>
														</div>
													</div>
													</form>
												</div>
												<div class="col-sm-6">
													
												</div>
											</div>
										</div>
								</div>
							</uib-tab>
							
							<uib-tab heading="Edit User Groups">
								<div class="wrap-reset"> 
									<div class="form-group legend">
										<h4><strong>Edit</strong> User Groups</h4>
									</div>
									<div class="form-group row" ng-controller="ModalDemoCtrl">
										<div class="col-md-12">
											<button ng-click="open()" class="btn btn-default btn-rounded btn-ef btn-ef-5 btn-ef-5b pull-right"><i class="fa fa-plus"></i> <span>Add Groups</span></button>
											<script type="text/ng-template" id="myModalContent.html">
												<form ng-submit="assignEditUserGroup(usergroup)">
													<div class="modal-header"><h4 class="modal-title custom-font">User Groups</h4></div>
													<div class="hometabs">
														<div class="overflow groupslists">
															<div class="col-md-12 mt-20">
																<ul>
																	<li ng-repeat="user_group in usergroups">
																		<label class="checkbox checkbox-custom-alt checkbox-custom-sm"> <input type="checkbox" value="{{user_group.usergroup_id}}" name="" ng-model="usergroup.usergrouparr[user_group.usergroup_id]" ><i></i> {{user_group.usergroupName}}</label>
																	</li>
																</ul>
																<a ui-sref="app.admin.user.user-groups" ng-click="cancel()" class="pull-right mt-15 mb-20">Create User Group</a>
															</div>
														</div>
													</div>
													<div class="modal-footer">
														<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left  group-close"></i> Close</button>
														<button type="submit" class="btn btn-success btn-rounded btn-ef btn-ef-3 btn-ef-3c"><i class="fa fa-arrow-right"></i> Submit</button>	
													</div>
												</form>											
											</script>
										</div>
									</div>
									<div class="form-group row">
										<div class="col-md-12">													
											<div class="tile-body p-0">
												<table class="table table-bordered">
													<thead>
														<tr>
															<th>Group Name</th>
															<th width="125">Action</th>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="x in userGroup">
															<td>{{x.usergroup_name}}</td>
															<td>
																<button type="button" ng-click="unassignUserGroupEdit(x.usergroup_id)" class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5b"><i class="fa fa-trash-o"></i> <span>Delete</span></button>
															</td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
									<div class="form-group row legend">
										<div class="col-md-12">
											<p></p>
											<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Cancel</button>
											<button class="btn btn-default btn-rounded btn-ef btn-ef-6 btn-ef-6a">Save</button>
										</div>
									</div>
								</div>
							</uib-tab>
							
						</uib-tabset>
					</div>
				</section>
			</div>
		</div>
	</div>
</div>
