<div class="page admin">
	<div class="pageheader backpage">		
		<a href back-button><i class="fa fa-arrow-left"></i> Back</a>
		<div class="facility-view elika-facility-name"></div>
	</div>
	
	<div class="pagecontent">	
		<div class="row">		
			<div class="dnone card-container col-sm-3 col-md-3">
				<div class="card">
					<div class="bg-dashboard">
						<div class="bg-transparent ddevicebg">
							<div class="row">
								<div class="col-md-12">
									<h3 class="custom-font">{{page.title}}</h3>
									<!--<p>{{page.subtitle}}</p>-->									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>			
			<flip-header></flip-header>			
		</div>
		
		<div class="row">
			<div class="col-md-12">
				<section class="tile box-shadow">
					<div class="tile-header dvd dvd-btm">
						<h1 class="custom-font">{{page.title}}</h1>
						<ul class="controls">
							<li class="addpopup">
								<div ng-controller="ModalDemoCtrl">
									<script type="text/ng-template" id="myModalContent.html">
										<form name="device_form" ng-validate="validationOptions" id="device_form" role="form">
											<div class="modal-header"><h4 class="modal-title custom-font">Add Configuration Device</h4></div>
											<div class="modal-body mt-5">
												<div class="row">
													<div class="form-group col-sm-12 col-md-12">
														<label for="">Device Name</label>
														<input type="text" maxlength="30" name="device_name" ng-model="device.device_name" id="" class="form-control" placeholder="" autocomplete="off" required>
													</div>
													
												</div>
												<div class="row">
													<div class="form-group col-sm-6 col-md-6">
														<label for="">Serial Number</label>
														<input type="text" maxlength="20" name="serial_no" id="" ng-model="device.serial_no" class="form-control" placeholder="" required>
													</div>
													<div class="form-group col-sm-6 col-md-6">
														<label for="">Registration Code</label>
														<input type="text" maxlength="30" name="" id="" ng-model="device.registration_code" class="form-control" placeholder="" required>
													</div>
												</div>
												<div class="row" >
													<div class="form-group col-sm-6 col-md-6">
														<label for="">Device Type</label><br/>
														<div class="btn-group btnrounded" ng-init="device.device_type='slave'">
															<label class="btn btn-default" ng-model="device.device_type" uib-btn-radio="'master'">Primary</label>
															<label class="btn btn-default" ng-model="device.device_type" uib-btn-radio="'slave'">Dependent</label>
														</div>
													</div>
													<div class="form-group col-sm-6 col-md-6">
														<label for="">&nbsp;</label>
														<select class="form-control" ng-hide="device.device_type=='master'" ng-model="device.device_master_id" ng-options="item.device_id as item.device_name for item in deviceList">
															<option value="">Select Primary Device</option>
														</select>
													</div>
												</div>
												
												<div class="row">
													<div class="form-group col-sm-6 col-md-6">
														<label for="">Facility</label><br/>
														<select class="form-control" ng-model="device.facility_id" ng-change="getDoorsList()" ng-options="item.facility_id as item.facility_name for item in facilityList">
															<option value="">Select</option>
														</select>
													</div>
													<div class="form-group col-sm-6 col-md-6">
														<label for="">Technician</label><br/>
														<select class="form-control" name="technician_id" ng-options="item.technician_id as item.technician_name for item in technicianList track by item.technician_id"  ng-model="device.technician_id" required>
															<option value="">Select</option>
														</select>
														<small class="pull-right"><a ng-click="cancel()" ui-sref="app.subadmin.support.technician">Add Technician</a></small>
													</div>
												</div>
												
												<div class="row">
													<div class="col-md-12">
														<label for="">Doors</label><br/><!--doorList-->
														<select ng-model="device.door_id" multiple chosen="{width: '100%'}" ng-options="item.door_id as item.door_name for item in doorList" required>
														</select>
													</div>
												</div>
											</div>
											<div class="modal-footer">
												<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" id="close" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Close</button>
												<button ng-click="formSubmit(device,device_form)" class="btn btn-success btn-rounded btn-ef btn-ef-3 btn-ef-3c"><i class="fa fa-arrow-right"></i> Submit</button>	
											</div>
										</form>		
									</script>
									<a ng-click="open();resetDependentDeviceModel();" class="btn btn-default btn-border btn-rounded btn-ef btn-ef-5 btn-ef-5b add"><i class="fa fa-plus"></i> <span>Add Devices</span></a>
								</div>
							</li>
						</ul>
					</div>
					
					<div class="hometabs">
						<div class="tile-body table-custom">
							<div class="row pos-r mb-40">
								<div class="col-sm-3 col-md-3 filterorder">
									<!--<label class="control-label" ng-init="filtershow=true">
										<a href="javascript:void()"><input type="checkbox" ng-model="filtershow" class="hideshowfilter"/>Filter by</a>
									</label>
									<label class="control-label" uib-dropdown on-toggle="toggled(open)">
										<a href uib-dropdown-toggle style="border-right: 0 none; ">Order by</a>
										<ul class="dropdown-menu with-arrow animated littleFadeInUp">
											<li><a href="" ng-click="orderByMe('title')">Title</a></li>
											<li><a href="" ng-click="orderByMe('facility')">Facility</a></li>
											<li><a href="" ng-click="orderByMe('model')">Model</a></li>
										</ul>
									</label>-->
								</div>
								<div class="col-sm-6 col-md-6">
									<div class="row">
										<div class="col-sm-8 col-md-9 search">
											<input type="text" class="form-control ng-pristine ng-valid ng-touched" ng-model="searchText" maxlength="50" placeholder="Search by text...." aria-invalid="false" style="">
											<button class="btn btn-default" type="button" ng-click="searchFunction()">Search</button>
										</div>
										<div class="col-sm-4 col-md-3 profilephoto csvupload">
											<div ng-controller="ModalDemo1Ctrl">
												<script type="text/ng-template" id="myModalContent1.html">
													<form name="form1" role="form">
														<div class="modal-header"><h4 class="modal-title custom-font">Upload CSV File</h4></div>
														<div class="modal-body mt-5 pb-30 mb-40">
															<label for="">Upload CSV file {{dependentDevice.length}}</label>
															<div class="profilephoto">
																<input type="file" class="filestyle user-profilep" ui-options="{ buttonText: 'Find file', iconName: 'fa fa-inbox' }" id="profilep-2" tabindex="-1">
																<div class="bootstrap-filestyle input-group"><input type="text" class="form-control " disabled=""> <span class="group-span-filestyle input-group-btn" tabindex="0"><label for="profilep-2" class="btn btn-default "><span class="glyphicon fa fa-inbox"></span> Find file</label></span></div>
															</div>											
														</div>
														<div class="modal-footer">
															<button class="btn btn-lightred btn-rounded btn-ef btn-ef-4 btn-ef-4c" ng-click="cancel()"><i class="fa fa-arrow-left"></i> Cancel</button>
															<button type="submit" class="btn btn-success btn-rounded btn-ef btn-ef-3 btn-ef-3c"><i class="fa fa-arrow-right"></i> Save</button>	
														</div>
													</form>		
												</script>
												<span ng-click="open()" class="group-span-filestyle input-group-btn"><label class="btn btn-default "><i class="fa fa-upload" aria-hidden="true"></i>&nbsp;&nbsp; Upload CSV</label></span>
											</div>
										</div>
									</div>
								</div>
								<div class="col-sm-3 col-md-3">
									<div class="gridlistbar ta-r pull-right">
										<label class="control-label">View by</label>
										<a href="" class="list-icon" ng-class="{active: layout == 'list'}" ng-click="changeClass()"><i class="fa fa-th-list" aria-hidden="true"></i></a>
										<a href="" class="grid-icon" ng-class="{active: layout == 'grid'}" ng-click="changeaClass()"><i class="fa fa-th" aria-hidden="true"></i></a>
									</div>
								</div>
							</div>
							<div ng-if="result">									
								<div layout="row" ng-class="statusclass">									
									{{result}}
								</div>
							</div>
							
							<div ng-if="dependentDevice.length == 0">
								<div layout="row" class="error" ng-class="statusclass">
									<!--{{status}}-->
									No Record Found
								</div>
							</div>
							<div ng-class="class" ng-cloak>
								<div class="glview">
									<md-content>			
										<md-card ng-repeat="device in dependentDevice | filter:text | filter:title | filter:facility | orderBy:myOrderBy track by device.device_id">
											<a ui-sref="app.admin.device.view-dependent-device"><img ng-src="images/device/elika-76-bronze.png" class="md-card-image" alt="Washed Out"></a>
											<md-card-content>
												<h2 class="md-title">{{ device.device_name }}</h2>
												<p>{{ device.device_model }}</p>
												<p>Dependent {{ device.device_slave_count }}</p>
											</md-card-content>
											<div class="md-actions" layout="row" layout-align="center center">
												<a class="btn btn-orange btn-border btn-rounded" ui-sref="app.admin.device.view-dependent-device({device_id:device.device_id})">View</a>
												<a class="btn btn-success btn-border btn-rounded" ui-sref="app.admin.device.edit-device({device_id:device.device_id})">Edit</a>
												<a class="btn btn-danger btn-border btn-rounded" ng-click="showConfirm(device.device_id,$event)">Delete</a>
											</div>
										</md-card>										
									</md-content>
									<button ng-if="dependentDevice && dependentDevice.length>0" class="btn btn-success btn-border btn-rounded m-0-auto f-wm" ng-hide="hideLoadMore" ng-click="loadMore()" ng-style="lmbtn">Load more</button>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>	
		
	</div>
</div>